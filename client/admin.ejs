<!DOCTYPE html>
<html>

<head>
  <% include partials/header.ejs %>
</head>

<body>
  <!-- col-sm-offset-1 col-lg-offset-1 -->
  <div class="col-sm-offset-1 col-sm-10 col-sm-offset-1 col-lg-offset-1 col-lg-10 col-lg-offset-1 main" ng-app="SWEApp" ng-controller="CRUDController" ng-init="init()">
    <% include partials/nav.ejs %>
    <div>
      <% include partials/admin_filters.ejs %>
      <!-- Start of accordion content -->
      <div class="row">
        <div class="col-md-12">
          <div id="sb-search" class="sb-search">
            <form>
              <input class="sb-search-input" placeholder="Search criteria" ng-model="query" type="text" id="search">
              <input class="sb-search-submit" type="submit">
            </form>
          </div>
          <div class="container-accordion">
            <div ng-show="loading" id="loading">
              <img id="loader" ng-show="loading" src="<%- path -%>/resources/load.gif">
              <div class="load-txt">Loading</div>
            </div>
            <div ng-hide="loading" class="accordion invisible {{visible}}">
              <dl>
                <div class="inverse-tab">
                  <span>
                    <!-- need this for spaces sake -->
                    &nbsp;
                  </span>
                  <div class="loanHeader">
                    <span> Customer Name </span>
                    <!-- style this somewhat... -->
                    <span> Loan Type </span>
                    <span> Loan Status </span>
                    <!-- - total $ -->
                    <span> Loan ID # </span>
                  </div>
                  <span> Show details </span>
                </div> 
                <!-- | filter: important_filter:archive_filter"> -->
                <div ng-repeat="loan in loans | orderBy:'updated_at':reverse | filter: query">
                  <!-- 
                  <div ng-if="loan.new">
                    {{reloadAccordion()}}
                  </div>
                   -->
                  <div class="tab accordionIn accordionOut">
                    <input id="tab-{{loan._id}}" type="checkbox" name="tabs" class="checkSelector">
                    <label for="tab-{{loan._id}}" class="tab-header">
                      <label class="container-mass container">
                        <input type="checkbox" id="{{loan._id}}-checkbox" ng-click="checkTrigger(loan._id)">
                        <span class="checkmark"></span>
                      </label>
                      <div class="loanHeader">
                        <span> {{loan.buyers_order.purchaser.name | limitTo: 18}} </span>
                        <span> {{loan.type | uppercase}} </span>
                        <span> {{loan.status | uppercase}} </span>
                        <span> #{{loan._id.toUpperCase() | limitTo:8:loan._id.length-8}} </span>
                      </div>
                    </label>
                    <div class="tab-content">
                      <% include partials/progress-row.ejs %>
                      <% include partials/warranty-row.ejs %>
                      <% include partials/accordion-comments.ejs %>
                    </div>
                  </div>
                </div>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Hover Crud buttons -->
    <% include partials/google_buttons.ejs %>
    <!-- Loan CRUD Modals -->
    <% include partials/modals.ejs %>
  </div>
  <% include partials/footer.ejs %>
</body>

</html>