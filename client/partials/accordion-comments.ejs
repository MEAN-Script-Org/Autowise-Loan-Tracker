<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-default chat">
            <div class="panel-heading">
                Comments
            </div>
            <div class="panel-body">
                <ul ng-repeat="comment in loan.comments | orderBy:'time':reverse_comments">
                    <li class="left clearfix">
                        <div class="chat-body clearfix">
                            <span>{{comment.content}}</span>
                            <div class="pull-right">
                              <strong class="primary-font"
                                      ng-if="comment.admin && user_isAdmin">
                                  Admin Only
                              </strong>
                              <small class="text-muted">
                                {{comment.newtime | date: "MMM dd, yyyy"}}
                                <b>{{comment.newtime | date: "h:mm a"}}</b>
                              </small>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="panel-footer">
              <!-- bug here: when a button is clicked, it submits the comment -->
              <form class="input-group" ng-submit="addComment(loan._id)">
                <input type="submit" style="display: none">

                <input type="text" class="form-control"
                       placeholder="Type your message here..."
                       id="{{loan._id}}-new-comment"/>
                
                <div class="input-group-btn">
                  <!-- Screw mobile ~ -->
                  <!-- Attempt to do boostrap layouts here thou~ -->

                  <button class="btn btn-md"
                    ng-class="(loan.commentAsAdmin ? 'btn-dark' : 'btn-info')"
                    ng-click="loan.commentAsAdmin = !loan.commentAsAdmin">
                    <span ng-if="loan.commentAsAdmin">NOT</span>
                    Visible To Customer
                  </button>

                  <button class="btn btn-warning btn-md"
                    ng-click="emailClient(loan._id, loan.user_email, loan.name)">
                    Email
                  </button>

                </div>
              </form>
            </div>
        </div>
    </div>
</div>