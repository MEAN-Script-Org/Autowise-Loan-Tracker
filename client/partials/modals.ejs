<!-- en masse Change status modal -->
<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="modal fade" data-keyboard="false" data-backdrop="static" id="changeModalEnMasse" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header centered-text">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <span>
                <h3>Change the status of the selected loans to</h3>
                <!-- <br> -->
                <!-- TODO: Figure the angular way to default to something instead of common html of 'selected' -->
                <select name="Loan Status" ng-model="newStatusMass">
                    <option disabled selected>New Status</option>
                    <option value="RECEIVED">Received</option>
                    <option value="SUBMITTED">Submitted</option>
                    <option value="PENDING">Pending</option>
                    <option value="VERIFIED">Verified</option>
                    <option value="APPROVED">Approved</option>
                    <option value="DENIED">Denied</option>
                </select>
              </span>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-dismiss="modal" ng-click="updateStatusEnMass(newStatusMass)">Update</button>
              <button class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Single Change status modal -->
<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="modal fade" data-keyboard="false" data-backdrop="static" id="changeModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header centered-text">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <span>
                <h3>Change the status of the {{singleLoanID[0].name}}'s {{singleLoanID[0].type}} loan to:</h3>
                <!-- TODO: Figure the angular way to default to something instead of common html of 'selected' -->
                <select name="Loan Status" ng-model="newStatus">
                    <!-- <option disabled selected>New Status</option> -->
                    <option value="RECEIVED">Received</option>
                    <option value="SUBMITTED">Submitted</option>
                    <option value="PENDING">Pending</option>
                    <option value="VERIFIED">Verified</option>
                    <option value="APPROVED">Approved</option>
                    <option value="DENIED">Denied</option>
                </select>
              </span>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-dismiss="modal" ng-click="changeLoanStatus(singleLoanID[0]._id, newStatus)">Update</button>
              <button class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Simple New Loan modal - UNUSED MODAL -->
<div class="row">
  <div class="col-xs-12">
    <div class="modal fade" data-backdrop="static" id="buyerModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
            <form>
              <h3>New Loan</h3>
              <input placeholder="Name" type="" ng-model="newLoan.name" required>
              <input placeholder="Email" type="email" ng-model="newLoan.user_email">
              <select ng-model="newLoan.type">
                <option value="" disabled>Select loan type</option>
                <option value="auto" selected>Auto Loan</option>
                <option value="repair">Repair</option>
                <option value="admin">Admin</option>
              </select>
              <!-- <input type="submit" class="btn btn-default"> -->
              <!-- <input type="submit" class="data-dismiss="modal"> -->
            </form>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary" data-dismiss="modal" ng-click="addLoan()">Create</button>
            <button class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Buyers order and Loan creation -->
<!-- TODO: Form validation -->
<!-- Marcial: Need better Modal CSS -->
<!--          Doesn't need to be mobile friendly -->
<div class="row">
  <div class="col-xs-12">
    <div class="modal fade" data-keyboard="false" data-backdrop="static" id="buyersOrderModal" tabindex="-1">
      <div class="modal-dialog" style="width: 60%; min-width: 615px;">
        <div class="modal-content">
          
          <!-- Modal Header -->
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h2>Buyers Order</h2>
            
            <!-- Navigational Tabs -->
            <ul class="nav nav-tabs" id="tabContent">
              <li class="active">
                <a href="#customer-info" data-toggle="tab">Customer Info</a>
              </li>
              <li> <a href="#car-info" data-toggle="tab">Car Info</a> </li>
              <li> <a href="#financing" data-toggle="tab">Financing</a> </li>
              <li> <a href="#trade-info" data-toggle="tab">Trade Info</a> </li>
              <li> <a href="#insurance" data-toggle="tab">Insurance</a> </li>
            </ul>
          </div>
          
          <!-- Modal Body -->
          <div class="modal-body">
             
            <!-- BUYER'S ORDER TABBED PAGES -->
            <div class="tab-content">
            
              <!-- TAB - Customer Information -->
              <div class="tab-pane active" id="customer-info">
                <h3>Purchaser Information</h3>
                <div class="buyers-order-req-asterisk">* Required</div>
                <br>
                
                <h5>Basic Info</h5>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Name<span  class="buyers-order-req-asterisk">*</span></span><input name="customer-name"  ng-model="bo.purchaser.name"              ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">DL<span    class="buyers-order-req-asterisk">*</span></span><input name="customer-dl"    ng-model="bo.purchaser.dl"                ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">DOB<span   class="buyers-order-req-asterisk">*</span></span><input name="customer-dob"   ng-model="bo.purchaser.dob"   type="date" ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Email</span><input name="customer-email" ng-model="bo.purchaser.email" type="email"></div>
                
                <h5>Contact Info</h5>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Phone #<span class="buyers-order-req-asterisk">*</span></span><input name="customer-phone" ng-model="bo.purchaser.phone.cell" type="tel"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Home #                                                 </span><input name="customer-home"  ng-model="bo.purchaser.phone.home" type="tel"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Work #                                                 </span><input name="customer-work"  ng-model="bo.purchaser.phone.work" type="tel"></div>
                <br>
                
                <h5>Address</h5>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Street<span class="buyers-order-req-asterisk">*</span></span><input  name="contact-street-address" ng-model="bo.purchaser.address.street"               ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">City<span class="buyers-order-req-asterisk">*</span></span><input    name="contact-city"           ng-model="bo.purchaser.address.city"                 ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">State<span class="buyers-order-req-asterisk">*</span></span><input   name="contact-state"          ng-model="bo.purchaser.address.state"                ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">County<span class="buyers-order-req-asterisk">*</span></span><input  name="contact-county"         ng-model="bo.purchaser.address.county"               ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Zipcode<span class="buyers-order-req-asterisk">*</span></span><input name="contact-zip"            ng-model="bo.purchaser.address.zip"     type="number"></div>
                <br>
                
                <!-- TODO: need to add stylings to all of this... -->
                
                <h4> Adding a Co-Purchaser?
                  <select ng-model="bo.copurchaser.invalid">
                    <option value="false"        >Yes</option>
                    <option value="true" selected>No </option>
                  </select>
                </h4>
                
                <!--Co-purchaser fields: hidden if the above field is marked "No" -->
                <div ng-hide="bo.copurchaser.invalid === 'true'">
                  <h5>Basic Info</h5>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">Name</span><input name="copurchaser-name" ng-model="bo.copurchaser.name"           ></div>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">DL</span><input name="copurchaser-dl"     ng-model="bo.copurchaser.dl"             ></div>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">DOB</span><input name="copurchaser-dob"   ng-model="bo.copurchaser.dob" type="date"></div>
                  <br>
                  
                  <h5>Address</h5>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">Street</span><input  name="contact-street-address" ng-model="bo.copurchaser.address.street"               ></div>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">City</span><input    name="contact-city"           ng-model="bo.copurchaser.address.city"                 ></div>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">State</span><input   name="contact-state"          ng-model="bo.copurchaser.address.state"                ></div>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">County</span><input  name="contact-county"         ng-model="bo.copurchaser.address.country"              ></div>
                  <div class="buyers-order-row"><span class="buyers-order-field-name">Zipcode</span><input name="contact-zip"            ng-model="bo.copurchaser.address.zip"     type="number"></div>
                </div>
              </div>
              
              <!-- TAB - Car Information -->
              <div class="tab-pane" id="car-info">
                <h3> Wanted Car Information </h3>
                <div class="buyers-order-req-asterisk">* Required</div>
                <br>
                
                <div class="buyers-order-row"><span class="buyers-order-field-name">Car type<span class="buyers-order-req-asterisk">*</span></span>
                  <select name="is-car-used" ng-model="bo.is_car_used">
                    <option disabled selected>Choose an option</option>
                    <option value="false">New</option>
                    <option value="true">Used</option>
                  </select>
                </div>
                <br>
                
                <div class="buyers-order-row"><span class="buyers-order-field-name">Year<span class="buyers-order-req-asterisk">*</span></span><input name="car-year"       ng-model="bo.car_info.year"    type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Make<span class="buyers-order-req-asterisk">*</span></span><input name="car-make"       ng-model="bo.car_info.make"                 ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Model<span class="buyers-order-req-asterisk">*</span></span><input name="car-model"     ng-model="bo.car_info.model"                ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Type<span class="buyers-order-req-asterisk">*</span></span><input name="car-type"       ng-model="bo.car_info.type_t"               ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Color<span class="buyers-order-req-asterisk">*</span></span><input name="car-color"     ng-model="bo.car_info.color"                ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Mileage<span class="buyers-order-req-asterisk">*</span></span><input name="car-mileage" ng-model="bo.car_info.mileage" type="number"></div>
                <br>
                
                <div class="buyers-order-row"><span class="buyers-order-field-name">Cylinders</span><input name="car-cyl"                      ng-model="bo.car_info.cyl"         type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Serial Number</span><input name="car-serial-no"            ng-model="bo.car_info.serial_no"   type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Stock Number</span><input name="car-stock-num"             ng-model="bo.car_info.stock_no"    type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Salesperson</span><input name="car-salesperson"            ng-model="bo.car_info.salesperson"              ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Lender</span><input name="car-lender"                      ng-model="bo.car_info.lender"                   ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Purchased new tag</span><input name="car-purchase-new-tag" ng-model="bo.car_info.purchase_new_tag"         ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Transfer</span><input name="car-transfer"                  ng-model="bo.car_info.transfer"                 ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Tag Number</span><input name="car-tag-no"                  ng-model="bo.car_info.tag_no"                   ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Plate Number</span><input name="car-plate-no"              ng-model="bo.car_info.plate_no"                 ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Expiration Date</span><input name="car-exp-date"           ng-model="bo.car_info.exp_date"    type="date"  ></div>
              </div>
              
              <!-- TAB - Financing -->
              <div class="tab-pane" id="financing">
                <h3> Financing </h3>
                <div class="buyers-order-req-asterisk">* Required</div>
                <br>
                
                <div class="buyers-order-row"><span class="buyers-order-field-name">NADA Retail<span class="buyers-order-req-asterisk">*</span></span><input name="nada_retail"           ng-model="bo.finances.nada_retail"       type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Total Sale Price<span class="buyers-order-req-asterisk">*</span></span><input name="total-sale-price" ng-model="bo.finances.total_sale_price"  type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Trade Allowance<span class="buyers-order-req-asterisk">*</span></span><input name="trade-allowance"   ng-model="bo.finances.trade_allowance"   type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Trade Difference<span class="buyers-order-req-asterisk">*</span></span><input name="trade-difference" ng-model="bo.finances.trade_difference"  type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Admin Fees<span class="buyers-order-req-asterisk">*</span></span><input name="admin-fees" value="845" ng-model="bo.finances.admin_fees"        type="number"></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Balance Owed<span class="buyers-order-req-asterisk">*</span></span><input name="bal-owed-on-trade"    ng-model="bo.finances.bal_owed_on_trade"              ></div>
                <div class="buyers-order-row"><span class="buyers-order-field-name">Total Due<span class="buyers-order-req-asterisk">*</span></span><input name="total-due"               ng-model="bo.finances.total_due"                      ></div>
                <br>
                
                Sub Total A<input type="number" name="sub-total-a" ng-model="bo.finances.sub_total_a"><br>
                Sales Tax is County: 
                <select name="sales-tax-is-county" ng-model="bo.finances.sales_tax.is_county">
                  <option value="True">True</option>
                  <option value="False">False</option>
                </select>
                <br>

                Sales Tax %    <input name="percentage"     ng-model="bo.finances.sales_tax.percentage" type="number"><br>
                Estimated Fees <input name="estimated-fees" ng-model="bo.finances.estimated_fees"       type="number"><br>
                Lemon Law Fee  <input name="lemon-law-fee"  ng-model="bo.finances.lemon_law_fee"        type="number"><br>
                Sub Total B    <input name="sub-total-b"    ng-model="bo.finances.sub_total_b"          type="number"><br>
                Down Payment   <input name="down-payment"   ng-model="bo.finances.down_payment"         type="number"><br>
                Unpaid Due     <input name="unpaid-due"     ng-model="bo.finances.unpaid_due"           type="number"><br>
                <br>
              </div>
              
              <!-- TAB - Trades Information -->
              <div class="tab-pane" id="trade-info">
                <h3> Trade Information </h3>
                <div class="buyers-order-req-asterisk">* Required</div>
                <br>
                
                Year    <input placeholder="Required" name="car-year"    ng-model="bo.trade_in.year" type="number"   ><br>
                Make    <input placeholder="Required" name="car-make"    ng-model="bo.trade_in.make"                 ><br>
                Model   <input placeholder="Required" name="car-model"   ng-model="bo.trade_in.model" type="number"  ><br>
                Type    <input placeholder="Required" name="car-type"    ng-model="bo.trade_in.type_t"               ><br>
                Color   <input placeholder="Required" name="car-color"   ng-model="bo.trade_in.color"                ><br>
                Mileage <input placeholder="Required" name="car-mileage" ng-model="bo.trade_in.mileage" type="number"><br>
                <br>

                <h4> Optional Information </h4>
                Cylinders      <input name="car-cyl"     ng-model="bo.trade_in.cyl"        type="number"><br>
                Serial Number  <input name="car-serial"  ng-model="bo.trade_in.serial_no"  type="number"><br>
                Account Number <input name="account-num" ng-model="bo.trade_in.account_no" type="number"><br>
                Holder         <input name="holder"      ng-model="bo.trade_in.holder"                  ><br>
                Address        <input name="address"     ng-model="bo.trade_in.address"                 ><br>
                Amount         <input name="amount"      ng-model="bo.trade_in.amount"     type="number"><br>
                Qualified By   <input name="qualif-by"   ng-model="bo.trade_in.qualif_by"               ><br>
                Verified By    <input name="verif-by"    ng-model="bo.trade_in.verif_by"                ><br>
                Good Through   <input name="good-thru"   ng-model="bo.trade_in.good_thru"  type="date"  ><br>
              </div>
              
              <!-- TAB - Insurance -->
              <div class="tab-pane" id="insurance">
                <h3> Insurance </h3>
                <div class="buyers-order-req-asterisk">* Required</div>
                <br>
                
                Policy Number  <input placeholder="Required" name="ins-policy-num" ng-model="bo.insr.policy_no"  type="number"><br>
                Company        <input placeholder="Required" name="company"        ng-model="bo.insr.company"                 ><br>
                <br>

                <h4> Optional Information </h4>
                Agent          <input name="agent"      ng-model="bo.insr.agent"                 ><br>
                Phone Number   <input name="phone-num"  ng-model="bo.insr.phone_no" type="number"><br>
                Eff Dates      <input name="eff-dates"  ng-model="bo.insr.eff_dtaes"             ><br>
                Verified By    <input name="verif-by"   ng-model="bo.insr.verif_by"              ><br>
              </div>
            </div>
          </div>
          
          <!-- Modal Footer -->
          <div class="modal-footer">
            <button class="btn btn-primary" ng-click="addLoanWithBO()">Submit</button>
            <button class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Warranties info -->
<!-- TODO: implement this -->
<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="modal fade" data-keyboard="false" data-backdrop="static" id="warrantyModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header centered-text">
              <button type="button" class="close" data-dismiss="modal">
                &times;
              </button>
              <span>
                {{warrantyInfo}}
              </span>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>