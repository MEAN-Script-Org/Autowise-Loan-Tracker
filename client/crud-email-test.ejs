<!DOCTYPE html>
<html>
<head>
<% include partials/header.ejs %>
</head>
<body>
<% include partials/nav.ejs %>

<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main" 
     ng-app="SWEApp" ng-controller="CRUDController" ng-init="init()">

    <!-- End of filters -->
    <!-- Start of accordion content -->

    <div class="row">
      <div class="col-md-12">
        <div class="container-accordion">
          <div class="accordion">
            <dl>
              <!-- make this into a compenent/partial -->
              <!-- to be it for user view -->
              <div ng-repeat="loan in loans | orderBy:'updated_at':reverse | filter:wantedID">
                <!-- filter:searchText -->
                {{wantedID}}
                <div ng-if="!loan.new">
                  <dt>
                    <a href="#accordion{{$index}}" aria-expanded="false" aria-controls="accordion{{$index}}" class="accordion-title accordionTitle js-accordionTrigger">
                      {{loan.name | limitTo: 18}} – Loan # {{loan._id.toUpperCase() | limitTo:8:loan._id.length-8}}
                    </a>
                  </dt>
                  <dd class="accordion-content accordionItem is-collapsed" id="accordion{{$index}}">
                    <% include partials/progress-row.ejs %>
                    <% include partials/accordion-comments.ejs %>
                  </dd>
                </div>
                
                <div ng-if="loan.new">
                  <dt>
                    <a href="#accordion1{{$index}}" aria-expanded="false" aria-controls="accordion1{{$index}}" class="accordion-title accordionTitle js-accordionTrigger">
                      {{loan.name | limitTo: 18}} – Loan # {{loan._id.toUpperCase() | limitTo:8:loan._id.length-8}}
                    </a>
                  </dt>
                  <dd class="accordion-content accordionItem" id="accordion1{{$index}}">
                    <% include partials/progress-row.ejs %>
                    <% include partials/accordion-comments.ejs %>
                  </dd>
                </div>
              </div>
            </dl>
          </div>
        </div>
      </div>
    </div>

    <form ng-submit="addLoan()">
      <h3>New Loan</h3>
      <input placeholder="Name" type="text" ng-model="newLoan.name" required>
      <input placeholder="Email" type="email" ng-model="newLoan.user_email">
      <input type="submit" class="btn btn-default">
      <input type="submit" class="hidden">
    </form>
</div>

<% include partials/footer.ejs %>

</body>
</html>