<!DOCTYPE html>
<html>
<head>
<% include partials/header.ejs %>
</head>

<!-- <OP!!></OP!!> -->
<body ng-app="SWEApp" ng-controller="LoginController" ng-init="init('<%- message -%>', '<%- type -%>')">
<% include partials/nav.ejs %>

<br>
<br>

<div class="row">
  <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
    <div class="login-panel panel panel-default">
      <!-- <div class="panel-heading">Log in</div> -->
      <div class="panel-body">
        <div style="background: #f2f3f2;">
          <ul class="nav nav-tabs login" id="tabContent">
            <li class="active login"> <a href="#login" class="login" data-toggle="tab">Login</a> </li>
            <li class="register"> <a href="#register" class="register" data-toggle="tab">Register</a> </li>
          </ul>
        </div>
        <br>
        <!-- use email automatically for usernames -->
        <div class="tab-content" id="registration">
          <div class="tab-pane active" id="login">
            <!-- login -->
            <form role="form" ng-submit="login()">
              <fieldset>
                <!-- inputMODAL -->
                <input ng-model="username" class="form-group form-control" placeholder="Username (this could be your email)" type="text">
                <input ng-model="password" class="form-group form-control" placeholder="Password" type="password">
                <!-- if someone wants to do the remember me... go ahead -->
                <div class="left-text" id="required"></div>
                <!-- <span class="required"></span> -->
                <button class="btn btn-primary" type="submit"> Login </button>
              </fieldset>
            </form>
          </div>

          <div class="tab-pane" id="register">
            <!-- register -->
            <form role="form" ng-submit="register()">
              <fieldset>
                <!-- ng-change="makeUsernameTheEmail()" -->
                <!-- trigger ng-change if !newUser.username || newUser.username == newUser.email-->
                <input ng-model="newUser.email" placeholder="Email" class="form-group form-control" type="email">

                <div class="form-group">
                <span style="color:red" ng-show="usernames[newUser.username]"> Username already taken </span>
                <!--  ?? -->
                <input ng-model="newUser.username" placeholder="Username *" class="{{usernames[newUser.username] ? 'has-error' : ''}} form-control"  type="text">
                </div>

                <input ng-model="newUser.password" placeholder="Password *" class="form-group form-control"  type="password">
                <input ng-model="newUser.dl"  placeholder="Driver's License #*" class="form-group form-control" type="text">
                <input ng-model="newUser.dob" placeholder="Date of Birth*" class="form-group form-control"   type="date">
                <div class="form-group">
                  <span>Admin?</span>
                  <input ng-model="newUser.isAdmin" type="checkbox">
                </div>

                <div class="left-text" id="required"></div>
                <button class="btn btn-primary" type="submit"> Register </button>
              </fieldset>
            </form>
          </div>
      </div>
    </div>
    <div ng-show="'<%- message -%>'" class="<%- type -%> centered-text" style="color: white;">
      <%- message -%>
    </div>
  </div>
</div>

<% include partials/footer.ejs %>
</body>
</html>
